<!DOCTYPE html>
<html ng-app="assignment">
	<head>
		<!-- META -->
		<meta charset="UTF-8">
		<title>CS454: Assignment 4</title>
		
		<!-- CSS Libraries -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
		<style type="text/css">
			.left-inner-addon {
			    position: relative;
			}
			.left-inner-addon input {
			    padding-left: 30px;    
			}
			.left-inner-addon i {
			    position: absolute;
			    padding: 10px 12px;
			    pointer-events: none;
			}
			
			.right-inner-addon {
			    position: relative;
			}
			.right-inner-addon input {
			    padding-right: 30px;    
			}
			.right-inner-addon i {
			    position: absolute;
			    right: 0px;
			    padding: 10px 12px;
			    pointer-events: none;
			}
		</style>
		
		<!-- JS Libraries -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.11/angular.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
		
		<!-- Angular App -->
		<script src="js/app.js"></script>
		
		<!-- Angular Models -->
		<script src="js/models/Employee.js"></script>
		<script src="js/models/Task.js"></script>
		
		<!-- Angular Containers -->
		<script src="js/containers/EmployeeContainer.js"></script>
		<script src="js/containers/TaskContainer.js"></script>
		
		<!-- Angular Controllers -->
		<script src="js/controllers/AddTaskCtrl.js"></script>
		<script src="js/controllers/AddEmployeeCtrl.js"></script>
		<script src="js/controllers/DashboardCtrl.js"></script>
		<script src="js/controllers/EmployeeCtrl.js"></script>
		<script src="js/controllers/TaskListCtrl.js"></script>
	</head>
	<body>
		<nav class="navbar navbar-default navbar-inverse" role="navigation" ng-controller="DashboardCtrl">
			<div>
			    <!-- Brand and toggle get grouped for better mobile display -->
			    <div class="navbar-header">
					<a class="navbar-brand" href="">CS454: Assignment 4</a>
					<form class="navbar-form navbar-left" role="search">
						<div class="form-group">
							<div class="right-inner-addon">
		                		<i class="glyphicon glyphicon-search"></i>
		                		<input type="search" class="form-control" placeholder="Search">
	                		</div>
				        </div>
			        </form>
				</div>
			</div>
		</nav>
		
		<section class="col-lg-12">
			<div class="row">
				<div class="col-md-3" ng-controller="AddTaskCtrl">
					<h2>Add Task</h2>
					<form>
						<div class="col-sm-12">
							<div class="col-sm-4">
								<label class="pull-right">Task:</label>
							</div>
							<div class="col-sm-8">
								<input type="text" ng-model="task.name" class="col-sm-12 form-control" />
							</div>
						</div>
						<div class="col-sm-12">
							<div class="col-sm-4">
								<label class="pull-right">Time (hrs):</label>
							</div>
							<div class="col-sm-8">
								<input type="text" ng-model="task.hours" class="col-sm-12 form-control" ng-change="filterHours()"/>
							</div>
						</div>
						<div class="col-sm-12"><br /></div>
						<div class="col-sm-12" style="text-align: center">
							<button class="btn btn-primary" ng-click="submitForm()">Add Task</button>
						</div>
					</form>
				</div>
				<div class="col-md-3" ng-controller="AddEmployeeCtrl">
					<h2>Add Employee</h2>
					<form>
						<div class="col-sm-12">
							<div class="col-sm-4">
								<label class="pull-right">Name:</label>
							</div>
							<div class="col-sm-8">
								<input type="text" ng-model="employee.name" class="col-sm-12 form-control" />
							</div>
						</div>
						<div class="col-sm-12">
							<div class="col-sm-4">
								<label class="pull-right">Title:</label>
							</div>
							<div class="col-sm-8">
								<input type="text" ng-model="employee.title" class="col-sm-12 form-control"/>
							</div>
						</div>
						<div class="col-sm-12"><br /></div>
						<div class="col-sm-12" style="text-align: center">
							<button class="btn btn-primary" ng-click="submitForm()">Add Employee</button>
						</div>
					</form>
				</div>
				<div class="col-md-6" ng-controller="TaskListCtrl">
					<h2>Task List</h2>
					<table class="table table-striped">
						<tr class="col-sm-12" ng-repeat="task in taskList">
							<td class="col-sm-8">{{task.name}} || {{task.hours}} hours</td>
							<td class="col-sm-2">
								<select ng-model="task.employee" class="form-control">
									<option ng-repeat="employee in employeeList" ng-value="employee.id">{{employee.name}}</option>
								</select>
							</td>
							<td class="col-sm-1">
								<button class="btn btn-warning col-sm-12" ng-click="assignTask(task,task.id)"><i class="glyphicon glyphicon-paperclip"></i> Assign</button>
							</td>
							<td class="col-sm-1">
								<button class="btn btn-danger col-sm-12" ng-click="deleteTask(task.id)"><i class="glyphicon glyphicon-remove-sign"></i> Delete</button>
							</td>
						</tr>
					</table>
				</div>
			</div>
			<div class="row" ng-controller="EmployeeCtrl">
				<section ng-repeat="employee in employeeList">
					<div class="col-md-{{colWidth}}" >
						<h3>{{employee.name}}</h3>
						<small>{{employee.title}}</small>
						<table class="table table-striped">
							<tr class="col-sm-12" ng-repeat="task in getTaskByEmployee(employee.id)">
								<td class="col-sm-8">{{task.name}}</td>
								<td class="col-sm-4">
									<button ng-show="task.isResolved()" class="btn btn-success col-sm-12 pull-right" ng-click="task.reopened()"><i class="glyphicon glyphicon-ok"></i> Completed</button>
									<button ng-hide="task.isResolved()" class="btn btn-default col-sm-12 pull-right" ng-click="task.resolved()">Complete</button>
								</td>
							</tr>
						</table>
						<h3>Total Hours: {{getTotalHours(employee.id)}} </h3>								
					</div>
					<span ng-bind-html="addBreak($index)"></span>
				</section>
			</div>
		</section>
	</body>
</html>
